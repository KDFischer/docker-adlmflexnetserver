# ComsolFlexLMServer

[![Docker Automated buil](https://img.shields.io/docker/automated/haysclark/adlmflexnetserver.svg?maxAge=2592000)](https://hub.docker.com/r/haysclark/adlmflexnetserver/builds/) [![Docker Stars](https://img.shields.io/docker/stars/haysclark/adlmflexnetserver.svg?maxAge=2592000)](https://hub.docker.com/r/haysclark/adlmflexnetserver/) [![](https://img.shields.io/docker/pulls/haysclark/adlmflexnetserver.svg)](https://hub.docker.com/r/haysclark/adlmflexnetserver 'DockerHub') [![license](https://img.shields.io/github/license/mashape/apistatus.svg)]()

 > Unofficial Comsol Multiphysics License Manager FLEXlmÂ® Network Server container.

Usage
-----

To use this container, simply treat it as if you were calling _lmgrd_ directly.  The only caveat is that the container ALWAYS adds the '-z' flag so that _lmgrd_ will run in the Foreground. Otherwise, Docker believes the task is over, and the container will 'stop' immediately.

The container does expect the user to map a local license file to within the __/var/flexlm__ directory.

    docker run -d --mac-address="[LICENSE_MAC_ADDRESS]" \
    -h [LICENSE_HOSTNAME] \
    -v [LOCAL_LICENSE_PATH]:/var/flexlm/adsk_server.lic:ro \
    -p 2080:2080 -p 27000-27009:27000-27009 \
    haysclark/adlmflexnetserver
    -c /var/flexlm/adsk_server.lic

 Alternatively, you can map a local folder containing multiple keys to the __/var/flexlm__ directory.

    docker run -d --mac-address="[LICENSE_MAC_ADDRESS]" \
    -h [LICENSE_HOSTNAME] \
    -v [LOCAL_LICENSE_FOLDER_PATH]:/var/flexlm \
    -p 2080:2080 -p 27000-27009:27000-27009 \
    haysclark/adlmflexnetserver
    -c /var/flexlm/license_file_1:/var/flexlm/license_file_2

### Logging

Docker's built-in logging functionality will collect the stdout/stderr generated by _lmgrd_. 

    docker logs [CONTAINER_ID]

Thus it's recommended you do NOT use the '-l' flag to log to a file, doing so will cause your Docker logs to be empty.  Additionally, avoid using the '-t' flag when using the 'run' command, enabling TTL support will cause extra line breaks in your Docker logs.

## Troubleshooting

If you are unsure if the server is running correctly, you can log into the container.

    docker exec -it CONTAINER_ID /bin/bash

Once in bash run: 

    lmutil lmstat -a -c [LICENSE_PATH]

## Resources

[Official Docs](https://www.comsol.de/support/knowledgebase/1077/)

## Supports

Applies to COMSOL Multiphysics 5.3a
